## Synopsis
12-bit data from accelrometer on an embedded device.

### Details
* Program should take the following arguments from commandline
	* name of a binary input file
	* a text output file.  

* Input file will contain 12-bit unsigned values.
* Output file should contain the 32 largest values from the input file.
* Other than the IO portion, consider your code is running on a memory and speed limited device (embedded)  	

### Installtion
* Download the code
* A make file is provided for building the project. Run 'make' command from the extracted folder
* 'make' will generate an executable named 'accelerator'. 
* This executable takes 4 commandline arguments 	```./accelerator -i in_file -o out_file``` Where 
	* ```in_file``` - is the input binary file for testing
	* ```out_file``` - is the text output file generated by the program  

### Summary

Problem listed two requirements:
1. Output file contains the 32 largest values from the input file.
2. Output file should also contain the last 32 values read from the input file.

Design considerations
---------------------
1. 	For requirement 1, I have used a minheap (priority queue). 
	Minheap provides compact and fast implementation for storing a small subset
	of ordered data. Minheap requires only one comparison for each element. If
	Minheap is full, one comparison with top of the heap is needed to decide 
	if we need to add the element to minheap. This speeds up the implementation 
	considerably for  data sets. Minheap also allows efficient way
	to sort the list as per the requirements. Also, insertion and removal of 
	data from heap is very fast (through sink/swim operations). Minheap also has
	an advantage on space as it does not require additional data structures for 
	maintaining state (as opposed to BST which requires left and right pointers).

2. 	For requirement 2, I have used a circular buffer to store the last 32 values read from
	the input file. I have also provided a compact version of the circular buffer that 
	packs the data. However, compact version is little bit complicated as it need to 
	pack and unpack data of 12-bits. A suitable data structure can be used depending 
	on the memory/performance tradeoff. Compact version can be turned on by setting 
	USE_COMPRESSED_CIRC_BUF to 1 in config.h
 
3. I have directly used array of 32 elements for both minheap and circular buffer 
   implementations. This design can be easily extended once we know more about the 
   system requirements. For example, minheap and circular buffer can hold up to 2^16 
   elements. Also data for these data structures can be provided by the users. 
   Please note that, this will have additional impact on memory size. 
 
 4.	For memory allocation, I have used global variables for this problem. 
	This is because on some systems local memory will be available for storing 
	relatively small amount of data. For example, compiler can statically 
	allocate global variable in device's local memory. Please note that depending 
	on the embedded system capabilities you can use several methods to 
	allocate/deallocate memory.

	Overall the current design/implementation takes 135 bytes of memory 
	(for non-compressed circular buffer) and 119 bytes of memory (for compressed 
	circular buffer). 
	
Files
-----
* ```main.c``` starting program, handles IO and commandline arguments. Please note that this file will not be part of the embedded code.

* ```acceldata.h/c``` Main logic is here for handling the accelerometer data. It allocates memory and uses other data structures to store data.

* ```circbuf.h/c```  Circular buffer implementation for 16-bit data

* ```circbuf_12bit.h/c``` Circular buffer implemenation for 12-bit data (compact)

* ```pq.h/c```  Minheap (priority queue) implementation.

* ```config.h``` configuration details

